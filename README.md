# 虚拟国政QQ群插件

一个基于AstrBot的QQ群虚拟国政管理插件，支持国家创建、成员管理、职位分配等功能。

## 功能特性

- ✨ **国家管理**：创建、加入、退出、解散国家
- 👥 **成员管理**：查看国家成员、晋升/撤职成员
- 🏛️ **职位系统**：支持自定义职位、自动创建职位
- 📊 **状态查看**：实时查看国家状态和成员信息
- 💰 **资源系统**：国库管理、个人仓库
- ⚔️ **战争系统**：宣战、终止战争、查看战争状态、战争记录
- 🤝 **外交系统**：建交、回应外交请求、查看外交关系、解除外交

## 安装方法

1. 将插件目录 `virtual_nation` 复制到 AstrBot 的插件目录
2. 重启 AstrBot 或在插件管理页面启用该插件

## 指令列表

| 指令 | 格式 | 功能 | 权限要求 |
|------|------|------|----------|
| **国家管理** | | | |
| 创建国家 | `/创建国家 <国家名>` | 创建一个新国家 | 未加入任何国家的用户 |
| 加入国家 | `/加入国家 <国家名>` | 加入一个已存在的国家 | 未加入任何国家的用户 |
| 查看所有国家 | `/查看所有国家` | 查看所有已创建的国家 | 所有用户 |
| 查看国家状态 | `/查看国家状态` | 查看自己所在国家的状态 | 已加入国家的用户 |
| 退出国家 | `/退出国家` | 退出当前所在国家 | 已加入国家的用户 |
| 解散国家 | `/解散国家` | 解散自己创建的国家 | 国家创建者 |
| **成员与职位管理** | | | |
| 晋升 | `/晋升<成员名或@用户> <职位>` | 晋升国家成员到指定职位 | 国家创建者 |
| 撤职 | `/撤职<成员名或@用户>` | 撤销国家成员的所有职位 | 国家创建者 |
| 查看国家所有成员 | `/查看国家所有成员` | 查看国家的所有成员及其职位 | 已加入国家的用户 |
| **资源系统** | | | |
| 查看国库 | `/查看国库` | 查看国家的国库资源 | 国家创建者 |
| 个人仓库 | `/个人仓库` | 查看个人的仓库资源 | 已加入国家的用户 |
| **战争系统** | | | |
| 宣战 | `/宣战 <国家名>` | 向指定国家宣战 | 国家创建者（30分钟冷却） |
| 终止战争 | `/终止战争 <国家名>` | 终止与指定国家的战争 | 国家创建者（只能终止自己宣战的战争） |
| 查看当前战争 | `/查看当前战争` | 查看当前国家的战争状态 | 已加入国家的用户 |
| 战争记录 | `/战争记录` | 查看历史战争记录 | 已加入国家的用户 |
| **外交系统** | | | |
| 建交 | `/建交 <目标国家> <赠礼物品> <赠礼数量>` | 向指定国家发送建交请求 | 国家创建者 |
| 查看外交 | `/查看外交` | 查看收到的外交请求 | 国家创建者 |
| 回应外交 | `/回应外交 <建交> <拒绝/同意> <目标国家>` | 回应外交请求 | 国家创建者 |
| 查看外交关系 | `/查看外交关系` | 查看当前国家的外交关系 | 已加入国家的用户 |
| 解除外交 | `/解除外交 <目标国家>` | 解除与指定国家的外交关系 | 国家创建者 |
| **帮助** | | | |
| 国战帮助 | `/国战帮助` | 查看插件帮助信息 | 所有用户 |

## 使用示例

### 创建国家
```
/创建国家 大明王朝
```

### 加入国家
```
/加入国家 大明王朝
```

### 晋升成员
```
/晋升张三 丞相
/晋升@李四 大将军
```

### 撤职成员
```
/撤职张三
/撤职@李四
```

### 查看国家所有成员
```
/查看国家所有成员
```

### 查看国库（仅国家创建者）
```
/查看国库
```

### 查看个人仓库
```
/个人仓库
```

### 宣战（仅国家创建者）
```
/宣战 张三国
```

### 终止战争（仅国家创建者）
```
/终止战争 张三国
```

### 查看当前战争
```
/查看当前战争
```

### 查看战争记录
```
/战争记录
```

### 发送建交请求（仅国家创建者）
```
/建交 李四国
/建交 张三国 国礼 12
```

### 查看外交请求（仅国家创建者）
```
/查看外交
```

### 回应外交请求（仅国家创建者）
```
/回应外交 建交 同意 张三国
/回应外交 建交 拒绝 李四国
```

### 查看外交关系
```
/查看外交关系
```

### 解除外交关系（仅国家创建者）
```
/解除外交 张三国
```

### 查看帮助信息
```
/国战帮助
```

## 输出示例

### 查看国家所有成员
```
国家共[3]人
1.张三 领导人
2.李四 丞相
3.王五 成员
```

### 查看国库
```
=== 大明王朝 国库 ===
【货币】白银：1000
【货币】金币：10
【物品】国礼：0
```

### 查看个人仓库
```
=== 个人仓库 ===
【货币】白银：100
【货币】金币：0
```

### 查看当前战争
```
1.
我方进攻《张三国》（这是我们宣战目标）
2.
《李四国》攻击我国（这是被宣战）
```

### 查看战争记录
```
战争记录：
1.我方进攻《张三国》（这是我们宣战目标）
2.《李四国》攻击我国（这是被宣战）
3.我方进攻《王五国》（这是我们宣战目标）
```

### 查看外交请求
```
1.
【张三国】要与我国建交，赠送国礼12。[暂未答复]（有赠礼）
2.
【李四国】要与我国建交，未赠国礼。[已答应]（无赠礼）
```

### 查看外交关系
```
1.【友好】李四国
2.【敌对】张三国
```

## 注意事项

1. 所有操作均基于QQ号进行，确保数据准确性
2. 国家创建者拥有最高权限，可以解散国家和管理成员职位
3. 晋升时，如果职位不存在，系统会自动创建该职位
4. 当国家最后一个成员退出时，国家会自动解散
5. 撤职操作会撤销成员的所有职位
6. 国家创建者自动获得"领导人"职位，无法被撤职
7. 国家创建时自动初始化国库资源：1000银，10金
8. 用户加入国家时自动初始化个人仓库：100银，0金
9. 宣战冷却时间为30分钟，每个国家每30分钟只能宣战一次
10. 只能终止自己发起的战争，无法终止对方发起的战争
11. 一个国家可以同时与多个国家处于战争状态
12. 建交时可选择赠送国礼，目前只能赠送国礼
13. 外交关系分为友好、敌对两种，没有中立状态
14. 解除外交关系会向对方发送提示信息

## 版本历史

### v1.0.0
- 初始版本
- 实现国家创建、加入、退出、解散功能
- 实现职位管理功能
- 实现成员查看功能

### v1.0.1
- 添加资源系统：国库管理、个人仓库
- 添加战争系统：宣战、终止战争、查看当前战争、战争记录
- 添加外交系统：建交、查看外交请求、回应外交请求、查看外交关系、解除外交
- 添加/国战帮助指令，提供完整帮助信息
- 实现宣战冷却机制（30分钟）
- 实现外交关系类型（友好、敌对）
- 实现外交国礼赠送功能

## 插件结构

```
virtual_nation/
├── main.py          # 插件核心代码
├── metadata.yaml    # 插件元数据配置
└── README.md        # 插件说明文档
```

## 依赖

- AstrBot 4.9.2+

## 开发说明

该插件基于 AstrBot 插件框架开发，使用 Python 语言编写。如需二次开发，请参考 AstrBot 插件开发文档。

## 许可证

MIT License
