# 文字斗气 API 使用教程

## 1. 基本信息

**API 地址**: http://api.tinyaii.top/
**API 版本**: 2.0.0
**请求方式**: 支持 GET 和 POST
**响应格式**: JSON

## 2. 指令列表

| 指令         | 别名               | 说明                               | 冷却时间  |
|--------------|--------------------|------------------------------------|-----------|
| 斗气帮助     | 帮助, 斗气指令     | 查看所有指令说明                   | 无        |
| 状态         | 我的状态, 查看状态 | 查看自己的斗气状态                 | 无        |
| 创建角色     | 注册, 开始斗气     | 创建斗气角色                       | 无        |
| 个人信息     | 信息, 我的信息     | 查看详细角色信息                   | 无        |
| 打坐         | 修炼, 冥想         | 基础修炼获得斗气，每次获得20斗气    | 10分钟    |
| 突破         | 升级, 进阶         | 消耗斗气突破境界，有成功率         | 无        |
| 调息         | 恢复, 休息         | 恢复生命和灵力                     | 30分钟    |
| 闭关         | 深度修炼           | 长时间修炼获得更多斗气，每分钟1斗气 | 2小时     |
| 排行榜       | 排名, 榜单         | 查看斗气排行榜                     | 无        |
| 道友         | 好友, 道友列表     | 查看好友/道友                     | 无        |
| 切磋         | 比试, 挑战         | 与道友切磋                         | 5分钟     |
| 赠送         | 送礼, 给予         | 赠送物品给道友                     | 10分钟    |

## 3. 详细使用说明

### 3.1 创建角色

**请求方式**: GET / POST
**请求参数**: username (必填，纯数字，不超过12位)

**请求示例**: 
```
http://api.tinyaii.top/index.php?action=创建角色&username=123456
```

**响应示例**: 
```json
{
    "code": 200,
    "message": "角色创建成功！",
    "data": {
        "username": "123456",
        "status": {
            "level": 1,
            "cultivation": "凡人",
            "realm": "凡人",
            "experience": 0,
            "health": 100,
            "mana": 50,
            "gold": 100,
            "spirit_stone": 0,
            "stamina": 100,
            "stamina_updated_at": 1767759156,
            "skills": [],
            "items": [],
            "created_at": "2026-01-07 04:12:36",
            "cultivation_points": 0,
            "cooldowns": [],
            "friends": [],
            "battle_wins": 0,
            "battle_losses": 0
        }
    }
}
```

### 3.2 查看状态

**请求方式**: GET / POST
**请求参数**: username (必填)

**请求示例**: 
```
http://api.tinyaii.top/index.php?action=状态&username=123456
```

**响应示例**: 
```json
{
    "code": 200,
    "message": "成功",
    "data": {
        "用户名": "123456",
        "等级": 1,
        "修为": "凡人",
        "境界": "凡人",
        "经验": 0,
        "生命值": 100,
        "灵力值": 50,
        "斗气值": 0,
        "体力值": 100,
        "灵石": 0,
        "金币": 100
    }
}
```

### 3.3 查看个人信息

**请求方式**: GET / POST
**请求参数**: username (必填)

**请求示例**: 
```
http://api.tinyaii.top/index.php?action=个人信息&username=123456
```

**响应示例**: 
```json
{
    "code": 200,
    "message": "成功",
    "data": {
        "基本信息": {
            "用户名": "123456",
            "创建时间": "2026-01-07 04:12:36"
        },
        "斗气状态": {
            "等级": 1,
            "修为": "凡人",
            "境界": "凡人",
            "经验值": 0,
            "斗气值": 0
        },
        "属性": {
            "生命值": 100,
            "灵力值": 50,
            "体力值": 100
        },
        "财富": {
            "金币": 100,
            "灵石": 0
        },
        "修炼冷却": {
            "打坐": "可用",
            "突破": "无冷却",
            "调息": "可用",
            "闭关": "可用",
            "排行榜": "无冷却",
            "道友": "无冷却",
            "切磋": "可用",
            "赠送": "可用"
        },
        "突破信息": {
            "下一境界": "斗之气1段",
            "所需斗气": 200,
            "当前斗气": 0,
            "突破成功率": "100%",
            "突破需求": "无"
        },
        "道友列表": ["暂无道友"],
        "切磋战绩": {
            "胜利": 0,
            "失败": 0
        },
        "技能": ["暂无技能"],
        "物品": ["暂无物品"]
    }
}
```

### 3.4 打坐

**请求方式**: GET / POST
**请求参数**: username (必填)

**请求示例**: 
```
http://api.tinyaii.top/index.php?action=打坐&username=123456
```

**响应示例**: 
```json
{
    "code": 200,
    "message": "打坐修炼成功！获得20点斗气",
    "data": {
        "当前斗气": 20,
        "境界": "凡人",
        "剩余体力": 100
    }
}
```

### 3.5 突破

**请求方式**: GET / POST
**请求参数**: username (必填)

**请求示例**: 
```
http://api.tinyaii.top/index.php?action=突破&username=123456
```

**成功响应示例**: 
```json
{
    "code": 200,
    "message": "突破成功！恭喜你进入斗之气1段！",
    "data": {
        "当前境界": "斗之气1段",
        "剩余斗气": 300,
        "等级": 1,
        "突破成功率": "100%",
        "消耗体力": 20,
        "剩余体力": 80
    }
}
```

**失败响应示例**: 
```json
{
    "code": 400,
    "message": "突破需要200点斗气，当前只有20点",
    "data": null
}
```

### 3.6 闭关

**请求方式**: GET / POST
**请求参数**: username (必填), duration (可选，闭关时长，单位秒，默认8小时)

**请求示例**: 
```
http://api.tinyaii.top/index.php?action=闭关&username=123456
```

**响应示例**: 
```json
{
    "code": 200,
    "message": "闭关修炼成功！480分钟获得了480点斗气",
    "data": {
        "当前斗气": 780,
        "境界": "斗之气1段",
        "闭关时长": "480分钟",
        "消耗体力": 50,
        "剩余体力": 30
    }
}
```

### 3.7 排行榜

**请求方式**: GET / POST
**请求参数**: 无

**请求示例**: 
```
http://api.tinyaii.top/index.php?action=排行榜
```

**响应示例**: 
```json
{
    "code": 200,
    "message": "成功",
    "data": {
        "排行榜": [
            {
                "排名": 1,
                "用户名": "123456",
                "境界": "斗之气1段",
                "修为值": 780,
                "等级": 1
            },
            {
                "排名": 2,
                "用户名": "456789",
                "境界": "凡人",
                "修为值": 50,
                "等级": 1
            }
        ],
        "更新时间": "2026-01-07 04:12:36"
    }
}
```

### 3.8 道友

**请求方式**: GET / POST
**请求参数**: username (必填)

**请求示例**: 
```
http://api.tinyaii.top/index.php?action=道友&username=123456
```

**响应示例**: 
```json
{
    "code": 200,
    "message": "成功",
    "data": {
        "道友数量": 1,
        "道友列表": [
            {
                "用户名": "456789",
                "境界": "斗之气1段",
                "等级": 1,
                "修为值": 500
            }
        ]
    }
}
```

### 3.9 切磋

**请求方式**: GET / POST
**请求参数**: username (必填), target (必填，切磋对象，格式：@用户名)

**请求示例**: 
```
http://api.tinyaii.top/index.php?action=切磋&username=123456&target=@456789
```

**响应示例**: 
```json
{
    "code": 200,
    "message": "切磋结束！123456 战胜了 456789！",
    "data": {
        "切磋双方": {
            "挑战者": "123456",
            "应战者": "456789"
        },
        "胜负结果": "胜利",
        "战斗详情": {
            "你的修为": 780,
            "对手修为": 500,
            "战斗值": {
                "你的战斗值": 750,
                "对手战斗值": 480
            }
        },
        "当前战绩": {
            "胜利": 1,
            "失败": 0
        }
    }
}
```

### 3.10 赠送

**请求方式**: GET / POST
**请求参数**: username (必填), target (必填，赠送对象，格式：@用户名), item (必填，赠送物品，格式：物品名x数量)

**请求示例**: 
```
http://api.tinyaii.top/index.php?action=赠送&username=123456&target=@456789&item=灵石x10
```

**响应示例**: 
```json
{
    "code": 200,
    "message": "赠送成功！你给456789赠送了10个灵石",
    "data": {
        "赠送对象": "456789",
        "赠送物品": "灵石",
        "赠送数量": 10,
        "你的剩余": 90,
        "对方获得": 60
    }
}
```

## 4. 错误码说明

| 错误码 | 说明                     |
|--------|--------------------------|
| 200    | 成功                     |
| 400    | 请求参数错误或指令无法执行 |
| 404    | 角色不存在               |
| 500    | 服务器内部错误           |

## 5. 注意事项

1. **创建角色规则**：
   - 用户名只能是纯数字
   - 用户名长度不能超过12位
   - 用户名不能重复

2. **体力系统**：
   - 最大体力100点
   - 每6小时自动恢复25点体力
   - 突破消耗20体力，闭关消耗50体力，打坐不消耗体力

3. **突破机制**：
   - 每次突破需要足够的斗气值
   - 突破有成功率（从100%逐渐降低到60%）
   - 失败会损失30%的突破所需斗气

4. **闭关规则**：
   - 每分钟获得1斗气
   - 最大时长8小时
   - 需要斗之气1段以上才能闭关
   - 消耗50点体力

## 6. 游戏机制详解

### 6.1 境界列表

| 境界         | 所需斗气 | 突破成功率 |
|--------------|----------|------------|
| 凡人         | 0        | -          |
| 斗之气1段   | 200      | 100%       |
| 斗之气2段   | 220      | 95%        |
| 斗之气3段   | 240      | 90%        |
| 斗之气4段   | 260      | 85%        |
| 斗之气5段   | 280      | 80%        |
| 斗之气6段   | 300      | 75%        |
| 斗之气7段   | 320      | 70%        |
| 斗之气8段   | 340      | 65%        |
| 斗之气9段   | 360      | 60%        |

### 6.2 资源获取

| 资源   | 获取方式               | 主要消耗               |
|--------|------------------------|------------------------|
| 斗气   | 打坐、闭关、突破奖励   | 突破境界               |
| 灵石   | 日常任务、探索、交易   | 购买物品、学习技能     |
| 生命值 | 自动恢复、调息         | 受伤                   |
| 灵力值 | 自动恢复、调息         | 使用技能               |
| 体力值 | 每6小时自动恢复25点    | 突破、闭关等行动       |

## 7. 常见问题

**Q**: 为什么无法创建角色？
**A**: 请检查用户名是否为纯数字，长度是否不超过12位，是否已被使用。

**Q**: 为什么突破失败？
**A**: 突破失败可能是因为斗气不足，或者突破成功率不足导致失败。

**Q**: 体力如何恢复？
**A**: 体力每6小时自动恢复25点，最大恢复到100点。

**Q**: 闭关可以中断吗？
**A**: 可以手动中断闭关，每次闭关结束才计算冷却时间。

**Q**: 如何查看排行榜？
**A**: 使用"排行榜"指令，无需参数，将显示斗气值前10名的角色。

## 8. 联系与反馈

如有任何问题或建议，请联系管理员。

---

**更新时间**: 2026-01-07
**API 版本**: 2.0.0